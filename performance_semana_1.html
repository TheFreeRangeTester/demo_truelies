<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Tests - Week 1</title>
        <!-- Chart.js CDN -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <!-- PDF Generation Libraries -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .report-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .report-header h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .metric-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .metric-card.success {
            background: rgba(40, 167, 69, 0.2);
        }
        
        .metric-card.warning {
            background: rgba(255, 193, 7, 0.2);
        }
        
        .metric-card.danger {
            background: rgba(220, 53, 69, 0.2);
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .generated-info {
            text-align: center;
            opacity: 0.8;
            font-size: 0.9rem;
        }
        
        .results-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .results-section h2 {
            margin-bottom: 20px;
            color: #495057;
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .results-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }
        
        .results-table th {
            background: #f8f9fa;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
        }
        
        .results-table th.sortable {
            cursor: pointer;
            user-select: none;
            position: relative;
            transition: background-color 0.2s ease;
        }
        
        .results-table th.sortable:hover {
            background-color: #e9ecef;
        }
        
        .sort-indicator {
            margin-left: 8px;
            font-size: 12px;
            color: #6c757d;
            transition: color 0.2s ease;
        }
        
        .results-table th.sortable:hover .sort-indicator {
            color: #007bff;
        }
        
        .results-table th.sort-asc .sort-indicator {
            color: #007bff;
        }
        
        .results-table th.sort-asc .sort-indicator::after {
            content: " ↑";
        }
        
        .results-table th.sort-desc .sort-indicator {
            color: #007bff;
        }
        
        .results-table th.sort-desc .sort-indicator::after {
            content: " ↓";
        }
        
        .results-table td {
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .result-row:hover {
            background-color: #f8f9fa;
        }
        
        .score-excellent { color: #28a745; font-weight: bold; }
        .score-good { color: #17a2b8; font-weight: bold; }
        .score-acceptable { color: #ffc107; font-weight: bold; }
        .score-poor { color: #fd7e14; font-weight: bold; }
        .score-fail { color: #dc3545; font-weight: bold; }
        
        .status-cell.success {
            color: #28a745;
            font-weight: bold;
        }
        
        .status-cell.danger {
            color: #dc3545;
            font-weight: bold;
        }
        
        .btn-details {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .btn-details:hover {
            background: #0056b3;
        }
        
        .btn-details.expanded {
            background: #dc3545;
        }
        
        .btn-details.expanded:hover {
            background: #c82333;
        }
        
        .details-row td {
            background: #f8f9fa;
            border-top: none;
            padding: 20px;
            border-left: 4px solid #007bff;
        }
        
        .details-row {
            transition: all 0.3s ease;
        }
        
        .candidate-details {
            padding: 20px;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .fact-detail {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #007bff;
            margin-bottom: 10px;
        }
        
        .fact-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .fact-name {
            font-weight: bold;
            color: #495057;
        }
        
        .fact-status {
            font-size: 1.2rem;
        }
        
        .fact-info div {
            margin-bottom: 5px;
        }
        
        .fact-reason {
            color: #dc3545;
            font-style: italic;
        }
        
        .conversation-texts {
            margin-top: 20px;
        }
        
        .text-section {
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .text-section h5 {
            margin: 0;
            padding: 12px 15px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            font-size: 0.95em;
            color: #495057;
        }
        
        .text-content {
            padding: 15px;
            background: white;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 200px;
            overflow-y: auto;
            border-left: 4px solid #007bff;
        }
        
        .text-content.user-input {
            border-left-color: #28a745;
        }
        
        .text-content.bot-response {
            border-left-color: #007bff;
        }
        
        .text-content.expected-response {
            border-left-color: #ffc107;
        }
        
        .text-content.reference-text {
            border-left-color: #6c757d;
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }
        
        .report-footer {
            text-align: center;
            padding: 20px;
            color: #6c757d;
            border-top: 1px solid #dee2e6;
            margin-top: 30px;
        }
        
        .report-footer a {
            color: #007bff;
            text-decoration: none;
        }
        
        .report-footer a:hover {
            text-decoration: underline;
        }
        
        .charts-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .charts-section h2 {
            margin-bottom: 30px;
            color: #495057;
            text-align: center;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
        }
        
        .chart-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .chart-container.chart-wide {
            grid-column: span 2;
        }
        
        .chart-container.chart-centered {
            grid-column: span 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .chart-container h3 {
            margin-bottom: 15px;
            color: #495057;
            font-size: 1.1rem;
            text-align: center;
        }
        
        .chart-container canvas {
            max-width: 100%;
            height: auto;
        }
        
        .target-control {
            margin-bottom: 15px;
            text-align: center;
        }
        
        .target-control label {
            font-weight: bold;
            color: #495057;
            margin-right: 10px;
        }
        
        .target-control input {
            width: 80px;
            padding: 5px 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .target-control input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }
        
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .report-header h1 {
                font-size: 2rem;
            }
            
            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .chart-container {
                min-width: 300px;
            }
            
            .results-table {
                font-size: 0.9rem;
            }
            
            .results-table th,
            .results-table td {
                padding: 10px;
            }
        }
        
    </style>
</head>
<body>
    <div class="container">
        <header class="report-header">
    <h1>Performance Tests - Week 1</h1>
    <div class="metrics-grid">
        <div class="metric-card">
            <div class="metric-value">12</div>
            <div class="metric-label">Total Candidates</div>
        </div>
        <div class="metric-card success">
            <div class="metric-value">83.3%</div>
            <div class="metric-label">Success Rate</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">10</div>
            <div class="metric-label">Passed</div>
        </div>
        <div class="metric-card danger">
            <div class="metric-value">2</div>
            <div class="metric-label">Failed</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">0.68</div>
            <div class="metric-label">Average Score</div>
        </div>
    </div>
    <div class="generated-info">
        📅 Generated on 10/13/2025 at 03:28
    </div>
</header>
        <section class="charts-section">
    <h2>Analytics Dashboard</h2>
    <div class="charts-grid">
        <div class="chart-container chart-centered">
            <h3>Success Rate Distribution</h3>
            <canvas id="successRateChart" width="400" height="200"></canvas>
        </div>
        <div class="chart-container chart-wide">
            <h3>Performance Trend</h3>
            <div class="target-control">
                <label for="targetInput">Target (%):</label>
                <input type="number" id="targetInput" value="80" min="0" max="100" step="1" 
                       onchange="updateTarget(this.value)">
            </div>
            <canvas id="weeklyTrendChart" width="800" height="200"></canvas>
        </div>
        <div class="chart-container">
            <h3>Similarity Score Trend</h3>
            <canvas id="similarityTrendChart" width="400" height="200"></canvas>
        </div>
        <div class="chart-container">
            <h3>Fact Retention Trend</h3>
            <canvas id="factRetentionChart" width="400" height="200"></canvas>
        </div>
    </div>
</section>
        <main>
            <div class="results-section">
    <h2>Detailed Results</h2>
    <div class="table-container">
        <table class="results-table" id="resultsTable">
            <thead>
                <tr>
                    <th onclick="sortTable(0)" class="sortable">
                        ID <span class="sort-indicator">↕</span>
                    </th>
                    <th onclick="sortTable(1)" class="sortable">
                        Score <span class="sort-indicator">↕</span>
                    </th>
                    <th onclick="sortTable(2)" class="sortable">
                        Status <span class="sort-indicator">↕</span>
                    </th>
                    <th onclick="sortTable(3)" class="sortable">
                        Facts Retained <span class="sort-indicator">↕</span>
                    </th>
                    <th onclick="sortTable(4)" class="sortable">
                        Date <span class="sort-indicator">↕</span>
                    </th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody><tr class="result-row">
                <td class="candidate-id">1</td>
                <td class="score-cell score-poor">0.507</td>
                <td class="status-cell danger">
                    ✗ FAIL
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_1')" class="btn-details" id="btn-details_1">View Details</button>
                </td>
            </tr>
            <tr id="details_1" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 1</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.507</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✗ No</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031378</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.507</div>
                    <div><strong>Polarity Match:</strong> ✗ No</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> negative</div>
                </div>
                <div class="failure-reason"><strong>Failure Reason:</strong> Polarity mismatch detected</div>
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">Policy POL-2024-001 does not cover your automobile with monthly payments of $850</div>
                </div>
                

            </div>
            
</div></td></tr>
<tr class="result-row">
                <td class="candidate-id">2</td>
                <td class="score-cell score-acceptable">0.753</td>
                <td class="status-cell success">
                    ✓ PASS
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_2')" class="btn-details" id="btn-details_2">View Details</button>
                </td>
            </tr>
            <tr id="details_2" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 2</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.753</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✓ Yes</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031395</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.753</div>
                    <div><strong>Polarity Match:</strong> ✓ Yes</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> neutral</div>
                </div>
                
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">Your car insurance policy POL-2024-001 costs $850 monthly</div>
                </div>
                

            </div>
            
</div></td></tr>
<tr class="result-row">
                <td class="candidate-id">3</td>
                <td class="score-cell score-excellent">0.903</td>
                <td class="status-cell success">
                    ✓ PASS
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_3')" class="btn-details" id="btn-details_3">View Details</button>
                </td>
            </tr>
            <tr id="details_3" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 3</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.903</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✓ Yes</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031402</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.903</div>
                    <div><strong>Polarity Match:</strong> ✓ Yes</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> neutral</div>
                </div>
                
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">Your auto insurance policy POL-2024-001 provides coverage up to $850.</div>
                </div>
                

            </div>
            
</div></td></tr>
<tr class="result-row">
                <td class="candidate-id">4</td>
                <td class="score-cell score-fail">0.432</td>
                <td class="status-cell danger">
                    ✗ FAIL
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_4')" class="btn-details" id="btn-details_4">View Details</button>
                </td>
            </tr>
            <tr id="details_4" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 4</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.432</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✗ No</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031411</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.432</div>
                    <div><strong>Polarity Match:</strong> ✓ Yes</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> positive</div>
                </div>
                <div class="failure-reason"><strong>Failure Reason:</strong> Possible hallucination found in the candidate</div>
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">I can confirm that policy POL-2024-001 for your vehicle is active with $850 in coverage.</div>
                </div>
                

            </div>
            
</div></td></tr>
<tr class="result-row">
                <td class="candidate-id">5</td>
                <td class="score-cell score-poor">0.631</td>
                <td class="status-cell success">
                    ✓ PASS
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_5')" class="btn-details" id="btn-details_5">View Details</button>
                </td>
            </tr>
            <tr id="details_5" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 5</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.631</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✓ Yes</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031416</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.631</div>
                    <div><strong>Polarity Match:</strong> ✓ Yes</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> positive</div>
                </div>
                
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">Great news! Your car insurance policy POL-2024-001 remains valid and offers $850 in protection.</div>
                </div>
                

            </div>
            
</div></td></tr>
<tr class="result-row">
                <td class="candidate-id">6</td>
                <td class="score-cell score-good">0.825</td>
                <td class="status-cell success">
                    ✓ PASS
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_6')" class="btn-details" id="btn-details_6">View Details</button>
                </td>
            </tr>
            <tr id="details_6" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 6</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.825</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✓ Yes</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031421</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.825</div>
                    <div><strong>Polarity Match:</strong> ✓ Yes</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> neutral</div>
                </div>
                
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">Policy POL-2024-001 is an auto insurance plan with a coverage amount of $850.</div>
                </div>
                

            </div>
            
</div></td></tr>
<tr class="result-row">
                <td class="candidate-id">7</td>
                <td class="score-cell score-poor">0.689</td>
                <td class="status-cell success">
                    ✓ PASS
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_7')" class="btn-details" id="btn-details_7">View Details</button>
                </td>
            </tr>
            <tr id="details_7" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 7</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.689</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✓ Yes</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031428</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.689</div>
                    <div><strong>Polarity Match:</strong> ✓ Yes</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> neutral</div>
                </div>
                
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">Just a reminder: your auto policy POL-2024-001 currently covers you for $850.</div>
                </div>
                

            </div>
            
</div></td></tr>
<tr class="result-row">
                <td class="candidate-id">8</td>
                <td class="score-cell score-poor">0.658</td>
                <td class="status-cell success">
                    ✓ PASS
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_8')" class="btn-details" id="btn-details_8">View Details</button>
                </td>
            </tr>
            <tr id="details_8" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 8</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.658</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✓ Yes</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031432</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.658</div>
                    <div><strong>Polarity Match:</strong> ✓ Yes</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> neutral</div>
                </div>
                
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">Auto coverage details: Policy POL-2024-001, insured amount $850.</div>
                </div>
                

            </div>
            
</div></td></tr>
<tr class="result-row">
                <td class="candidate-id">9</td>
                <td class="score-cell score-poor">0.533</td>
                <td class="status-cell success">
                    ✓ PASS
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_9')" class="btn-details" id="btn-details_9">View Details</button>
                </td>
            </tr>
            <tr id="details_9" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 9</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.533</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✓ Yes</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031437</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.533</div>
                    <div><strong>Polarity Match:</strong> ✓ Yes</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> neutral</div>
                </div>
                
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">Your vehicle is insured under policy POL-2024-001, which includes $850 of coverage.</div>
                </div>
                

            </div>
            
</div></td></tr>
<tr class="result-row">
                <td class="candidate-id">10</td>
                <td class="score-cell score-poor">0.632</td>
                <td class="status-cell success">
                    ✓ PASS
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_10')" class="btn-details" id="btn-details_10">View Details</button>
                </td>
            </tr>
            <tr id="details_10" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 10</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.632</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✓ Yes</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031441</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.632</div>
                    <div><strong>Polarity Match:</strong> ✓ Yes</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> neutral</div>
                </div>
                
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">I've verified that your auto policy POL-2024-001 offers $850 in benefits.</div>
                </div>
                

            </div>
            
</div></td></tr>
<tr class="result-row">
                <td class="candidate-id">11</td>
                <td class="score-cell score-good">0.823</td>
                <td class="status-cell success">
                    ✓ PASS
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_11')" class="btn-details" id="btn-details_11">View Details</button>
                </td>
            </tr>
            <tr id="details_11" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 11</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.823</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✓ Yes</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031445</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.823</div>
                    <div><strong>Polarity Match:</strong> ✓ Yes</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> neutral</div>
                </div>
                
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">Everything is set—your auto insurance, policy POL-2024-001, protects you up to $850.</div>
                </div>
                

            </div>
            
</div></td></tr>
<tr class="result-row">
                <td class="candidate-id">12</td>
                <td class="score-cell score-acceptable">0.792</td>
                <td class="status-cell success">
                    ✓ PASS
                </td>
                <td class="facts-cell">3/3</td>
                <td class="date-cell">13/10/2025 03:28</td>
                <td class="actions-cell">
                    <button onclick="toggleDetails('details_12')" class="btn-details" id="btn-details_12">View Details</button>
                </td>
            </tr>
            <tr id="details_12" class="details-row" style="display: none;"><td colspan="6">
        <div class="candidate-details">
            <h4>Test Information</h4>
            <div class="detail-grid">
                <div><strong>Test Name:</strong> Candidate 12</div>
                <div><strong>Test Category:</strong> LLM Validation</div>
                <div><strong>Retention Score:</strong> 0.792</div>
                <div><strong>Facts Retained:</strong> 3/3</div>
                <div><strong>All Retained:</strong> ✓ Yes</div>
                <div><strong>Timestamp:</strong> 2025-10-13T03:28:29.031452</div>
            </div>
        

            <h4>Facts Analysis</h4>
            <div class="facts-details">
            
                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">policy_number</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> POL-2024-001</div>
                        <div><strong>Extracted:</strong> POL-2024-001</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">amount</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> 850</div>
                        <div><strong>Extracted:</strong> 850</div>
                    </div>
                </div>
                

                <div class="fact-detail">
                    <div class="fact-header">
                        <span class="fact-name">coverage_type</span>
                        <span class="fact-status ✓">✓</span>
                    </div>
                    <div class="fact-info">
                        <div><strong>Expected:</strong> auto insurance</div>
                        <div><strong>Extracted:</strong> auto insurance</div>
                    </div>
                </div>
                
            </div>
            

            <h4>Validation Details</h4>
            <div class="validation-details">
                <div class="detail-grid">
                    <div><strong>Similarity Score:</strong> 0.792</div>
                    <div><strong>Polarity Match:</strong> ✓ Yes</div>
                    <div><strong>Reference Polarity:</strong> neutral</div>
                    <div><strong>Candidate Polarity:</strong> positive</div>
                </div>
                
            </div>
            

            <h4>Texts</h4>
            <div class="conversation-texts">
            

                <div class="text-section">
                    <h5>📝 Candidate Text:</h5>
                    <div class="text-content candidate-text">Summary: Auto insurance policy POL-2024-001 with a coverage limit of $850 is active and in good standing.</div>
                </div>
                

            </div>
            
</div></td></tr></tbody>
        </table>
    </div>
</div>
        </main>
        <footer class="report-footer">
    <p>Generated by True Lies Validator v0.6.4</p>
    <p><a href="mailto:patominer@gmail.com">patominer@gmail.com</a></p>
</footer>
    </div>
    <script>
        // Inicializar variables globales para los gráficos
        window.chartInstances = {
            weeklyTrend: null,
            similarityTrend: null,
            factRetention: null
        };
        
        
        // Función para ordenar la tabla
        function sortTable(columnIndex) {
            console.log('sortTable called with columnIndex:', columnIndex);
            
            const table = document.getElementById('resultsTable');
            if (!table) {
                console.error('Table with id resultsTable not found');
                return;
            }
            
            const tbody = table.querySelector('tbody');
            if (!tbody) {
                console.error('Table tbody not found');
                return;
            }
            
            const allRows = Array.from(tbody.querySelectorAll('tr'));
            const headers = table.querySelectorAll('th');
            
            console.log('Found', allRows.length, 'total rows and', headers.length, 'headers');
            
            // Filtrar solo las filas que tienen el número correcto de celdas (6 celdas = fila principal)
            const rows = allRows.filter(row => row.cells && row.cells.length >= 6);
            
            console.log('Filtered to', rows.length, 'sortable rows (with 6+ cells)');
            
            if (rows.length === 0) {
                console.error('No sortable rows found in table');
                return;
            }
            
            // Determinar el orden de sorting
            let sortOrder = 'asc';
            const currentHeader = headers[columnIndex];
            
            console.log('Current header classes:', currentHeader.classList.toString());
            
            // Si ya está ordenado por esta columna, cambiar el orden
            if (currentHeader.classList.contains('sort-asc')) {
                sortOrder = 'desc';
                currentHeader.classList.remove('sort-asc');
                currentHeader.classList.add('sort-desc');
            } else if (currentHeader.classList.contains('sort-desc')) {
                sortOrder = 'asc';
                currentHeader.classList.remove('sort-desc');
                currentHeader.classList.add('sort-asc');
            } else {
                // Limpiar clases de sorting de todos los headers
                headers.forEach(header => {
                    header.classList.remove('sort-asc', 'sort-desc');
                });
                sortOrder = 'asc';
                currentHeader.classList.add('sort-asc');
            }
            
            console.log('Sorting in', sortOrder, 'order');
            
            // Ordenar las filas
            console.log('Starting sort with', rows.length, 'rows');
            rows.sort((a, b) => {
                const aValue = a.cells[columnIndex].textContent.trim();
                const bValue = b.cells[columnIndex].textContent.trim();
                
                console.log('Comparing:', aValue, 'vs', bValue);
                
                // Manejar diferentes tipos de datos
                let comparison = 0;
                
                if (columnIndex === 0) { // ID - numérico
                    comparison = parseInt(aValue) - parseInt(bValue);
                } else if (columnIndex === 1) { // Score - numérico
                    comparison = parseFloat(aValue) - parseFloat(bValue);
                } else if (columnIndex === 3) { // Facts Retained - formato "X/Y"
                    const aMatch = aValue.match(/(\d+)\/(\d+)/);
                    const bMatch = bValue.match(/(\d+)\/(\d+)/);
                    if (aMatch && bMatch) {
                        const aRatio = parseInt(aMatch[1]) / parseInt(aMatch[2]);
                        const bRatio = parseInt(bMatch[1]) / parseInt(bMatch[2]);
                        comparison = aRatio - bRatio;
                    } else {
                        comparison = aValue.localeCompare(bValue);
                    }
                } else { // Texto - alfabético
                    comparison = aValue.localeCompare(bValue);
                }
                
                console.log('Comparison result:', comparison, 'sortOrder:', sortOrder);
                return sortOrder === 'asc' ? comparison : -comparison;
            });
            console.log('Sort completed');
            
            // Log del orden después del sorting
            console.log('Order after sorting:');
            rows.forEach((row, index) => {
                const cellValue = row.cells[columnIndex] ? row.cells[columnIndex].textContent.trim() : 'N/A';
                console.log('Sorted row', index, ':', cellValue);
            });
            
            // Reorganizar las filas en el DOM
            console.log('Reorganizing rows in DOM...');
            rows.forEach((row, index) => {
                console.log('Moving row', index, 'to position', index);
                tbody.appendChild(row);
            });
            
            // Verificar que el sorting funcionó
            console.log('Final row order:');
            const finalRows = Array.from(tbody.querySelectorAll('tr'));
            finalRows.forEach((row, index) => {
                const cellValue = row.cells[columnIndex] ? row.cells[columnIndex].textContent.trim() : 'N/A';
                console.log('Row', index, ':', cellValue);
            });
            
            console.log('Table sorted by column', columnIndex, 'in', sortOrder, 'order');
        }
        
        // Asegurar que el DOM esté cargado
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, sorting functions ready');
        });
        
        
        
        // Real data for charts
        const temporalData = {"labels": ["10/13"], "scores": [53.3], "counts": [15], "similarity_scores": [99.4], "fact_retention_scores": [87.8]};
        const comparisonData = {"current_period": 63.3, "previous_period": 0.0, "historical_average": 63.3, "target": 80};
        
        // Gráfico de distribución de éxito
        const successRateCtx = document.getElementById('successRateChart').getContext('2d');
        new Chart(successRateCtx, {
            type: 'doughnut',
            data: {
                labels: ['Passed', 'Failed'],
                datasets: [{
                    data: [10, 2],
                    backgroundColor: ['#28a745', '#dc3545'],
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    title: {
                        display: true,
                        text: 'Overall Success Rate'
                    }
                }
            }
        });
        
        // Gráfico de análisis de retención de facts
        const factRetentionCtx = document.getElementById('factRetentionChart').getContext('2d');
        
        // Use real temporal data for fact retention scores
        const factRetentionData = temporalData.fact_retention_scores || [];
        const factRetentionLabels = temporalData.labels || [];
        
        window.chartInstances.factRetention = new Chart(factRetentionCtx, {
            type: 'line',
            data: {
                labels: factRetentionLabels.length > 0 ? factRetentionLabels : ['No Data'],
                datasets: [{
                    label: 'Fact Retention Rate',
                    data: factRetentionData.length > 0 ? factRetentionData : [0],
                    borderColor: '#17a2b8',
                    backgroundColor: 'rgba(23, 162, 184, 0.1)',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#17a2b8',
                    pointBorderColor: '#ffffff',
                    pointBorderWidth: 2,
                    pointRadius: 5
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value.toFixed(0) + '%';
                            }
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Fact Retention Analysis'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return 'Fact Retention: ' + context.parsed.y.toFixed(1) + '%';
                            }
                        }
                    }
                }
            }
        });
        
        
        // Gráfico de tendencia semanal
        const weeklyTrendCtx = document.getElementById('weeklyTrendChart').getContext('2d');
        
        // Use real temporal data
        let currentTarget = 80;
        const targetData = temporalData.labels.map(() => currentTarget);
        
        window.chartInstances.weeklyTrend = new Chart(weeklyTrendCtx, {
            type: 'line',
            data: {
                labels: temporalData.labels.length > 0 ? temporalData.labels : ['No Data'],
                datasets: [{
                    label: 'Pass Rate %',
                    data: temporalData.scores.length > 0 ? temporalData.scores : [0],
                    borderColor: '#28a745',
                    backgroundColor: 'rgba(40, 167, 69, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }, {
                    label: 'Target',
                    data: temporalData.labels.length > 0 ? targetData : [currentTarget],
                    borderColor: '#dc3545',
                    backgroundColor: 'rgba(220, 53, 69, 0.1)',
                    borderWidth: 2,
                    borderDash: [5, 5],
                    fill: false
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value.toFixed(0) + '%';
                            }
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Performance vs Target'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                if (context.datasetIndex === 0) {
                                    return 'Pass Rate: ' + context.parsed.y.toFixed(1) + '%';
                                } else {
                                    return 'Target: ' + context.parsed.y.toFixed(0) + '%';
                                }
                            }
                        }
                    }
                }
            }
        });
        
        // Función para actualizar el target dinámicamente
        function updateTarget(newTarget) {
            currentTarget = parseFloat(newTarget);
            if (window.chartInstances.weeklyTrend) {
                const labels = window.chartInstances.weeklyTrend.data.labels;
                const newTargetData = labels.map(() => currentTarget);
                window.chartInstances.weeklyTrend.data.datasets[1].data = newTargetData;
                window.chartInstances.weeklyTrend.data.datasets[1].label = 'Target (' + currentTarget + '%)';
                window.chartInstances.weeklyTrend.update();
            }
        }
        
        // Gráfico de tendencia de similarity scores
        const similarityTrendCtx = document.getElementById('similarityTrendChart').getContext('2d');
        
        // Use real temporal data for similarity scores
        const similarityData = temporalData.similarity_scores || [];
        const similarityLabels = temporalData.labels || [];
        
        window.chartInstances.similarityTrend = new Chart(similarityTrendCtx, {
            type: 'line',
            data: {
                labels: similarityLabels.length > 0 ? similarityLabels : ['No Data'],
                datasets: [{
                    label: 'Average Similarity Score',
                    data: similarityData.length > 0 ? similarityData : [0],
                    borderColor: '#28a745',
                    backgroundColor: 'rgba(40, 167, 69, 0.1)',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#28a745',
                    pointBorderColor: '#ffffff',
                    pointBorderWidth: 2,
                    pointRadius: 5
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value.toFixed(0) + '%';
                            }
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Similarity Score Trend'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return 'Similarity: ' + context.parsed.y.toFixed(1) + '%';
                            }
                        }
                    }
                }
            }
        });
        
        // Variables globales para los gráficos (ya inicializadas arriba)
        
        // Función para mostrar/ocultar detalles
        function toggleDetails(detailsId) {
            const detailsRow = document.getElementById(detailsId);
            const button = document.getElementById('btn-' + detailsId);
            
            if (detailsRow.style.display === 'none' || detailsRow.style.display === '') {
                detailsRow.style.display = 'table-row';
                button.textContent = 'Hide Details';
                button.classList.add('expanded');
            } else {
                detailsRow.style.display = 'none';
                button.textContent = 'View Details';
                button.classList.remove('expanded');
            }
        }
        
        
        
        // Función auxiliar para generar datos semanales
        function generateWeeklyTrendData(data) {
            const results = data.results;
            const now = new Date();
            const weeks = [];
            
            // Generar datos para las últimas 8 semanas
            for (let i = 7; i >= 0; i--) {
                const weekStart = new Date(now.getTime() - (i * 7 * 24 * 60 * 60 * 1000));
                const weekLabel = weekStart.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                weeks.push(weekLabel);
            }
            
            // Calcular promedios semanales (simulado)
            const scores = [0.85, 0.78, 0.82, 0.89, 0.91, 0.87, 0.83, 0.86];
            const targets = Array(8).fill(0.8);
            
            return {
                labels: weeks,
                scores: scores,
                targets: targets,
                currentAverage: 0.86,
                previousAverage: 0.83,
                historicalAverage: 0.85
            };
        }
        
        // Función para generar datos temporales según el período usando datos reales
        function generateTemporalData(period) {
            // Use the real temporal data that was passed from Python
            const realData = temporalData;
            const currentTarget = parseFloat(document.getElementById('targetInput').value) || 80;
            
            // If we have real data, use it
            if (realData && realData.labels && realData.labels.length > 0) {
                const labels = realData.labels;
                const scores = realData.scores;
                const targets = labels.map(() => currentTarget);
                const similarity_scores = realData.similarity_scores || [];
                const fact_retention_scores = realData.fact_retention_scores || [];
                
                return { labels, scores, targets, similarity_scores, fact_retention_scores };
            }
            
            // Fallback: return empty data if no real data available
            return { 
                labels: ['No Data'], 
                scores: [0], 
                targets: [currentTarget],
                similarity_scores: [0],
                fact_retention_scores: [0]
            };
        }
        
        // Función para generar datos de tendencia
        function generateTrendData(period) {
            const results = window.chartInstances.trend?.data.datasets[0].data || [];
            const labels = window.chartInstances.trend?.data.labels || [];
            
            // Simular datos más detallados según el período
            switch(period) {
                case 'daily':
                    return {
                        labels: labels.slice(-14), // Últimos 14 puntos
                        scores: results.slice(-14)
                    };
                case 'weekly':
                    return {
                        labels: labels.slice(-8), // Últimas 8 semanas
                        scores: results.slice(-8)
                    };
                case 'monthly':
                    return {
                        labels: labels.slice(-6), // Últimos 6 meses
                        scores: results.slice(-6)
                    };
                default:
                    return { labels, scores: results };
            }
        }
        
        // Función para generar datos de comparación
        function generateComparisonData(baseline) {
            const baseValues = {
                currentAverage: 0.86,
                previousAverage: 0.83,
                historicalAverage: 0.85,
                target: 0.8
            };
            
            switch(baseline) {
                case 'previous':
                    return {
                        labels: ['Current Period', 'Previous Period', 'Target'],
                        values: [baseValues.currentAverage, baseValues.previousAverage, baseValues.target]
                    };
                case 'average':
                    return {
                        labels: ['Current Period', 'Historical Average', 'Target'],
                        values: [baseValues.currentAverage, baseValues.historicalAverage, baseValues.target]
                    };
                case 'target':
                    return {
                        labels: ['Current Period', 'Target (80%)', 'Excellence (90%)'],
                        values: [baseValues.currentAverage, baseValues.target, 0.9]
                    };
                default:
                    return {
                        labels: ['Current Period', 'Previous Period', 'Historical Average', 'Target'],
                        values: [baseValues.currentAverage, baseValues.previousAverage, baseValues.historicalAverage, baseValues.target]
                    };
            }
        }
        
        // Función para generar datos de tiempo de respuesta
        function generateResponseTimeData(data) {
            const results = data.results || [];
            
            if (results.length === 0) {
                return {
                    labels: ['No Data Available'],
                    values: [0]
                };
            }
            
            // Simular tiempos de respuesta basados en el score
            const labels = results.map(r => r.test_name || 'Unknown').slice(0, 8);
            const values = results.map(r => {
                const score = r.retention_score || 0;
                // Mejor score = menor tiempo de respuesta
                return Math.round(1000 - (score * 800) + Math.random() * 200);
            }).slice(0, 8);
            
            return { labels, values };
        }
        
        // Función para generar datos de facts
        function generateFactsData(data) {
            const results = data.results || [];
            
            if (results.length === 0) {
                return {
                    labels: ['No Data Available'],
                    values: [0]
                };
            }
            
            const labels = results.map(r => (r.test_name || 'Unknown').substring(0, 15) + '...').slice(0, 8);
            const values = results.map(r => {
                const retained = r.facts_retained || 0;
                const total = r.total_facts || 1;
                return Math.round((retained / total) * 100);
            }).slice(0, 8);
            
            return { labels, values };
        }
        
    </script>
</body>
</html>